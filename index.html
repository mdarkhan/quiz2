<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>আরব জাতিগোষ্ঠী পরিচিতি</title>

<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Bengali:wght@400;600;700&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box}
body{
  margin:0;
  font-family:'Noto Sans Bengali',sans-serif;
  background:#f8fafc;
  overflow:hidden;
  color:#1e293b;
}

/* HEADER */
header{
  position:absolute;
  top:0;left:0;right:0;
  z-index:20;
  background:#ffffffee;
  border-bottom:1px solid #e5e7eb;
  padding:12px 24px;
}
header h1{margin:0;font-size:20px}
header p{margin:2px 0 0;font-size:12px;color:#64748b}

/* CANVAS */
#container{
  position:absolute;
  inset:0;
  cursor:grab;
}
#container.dragging{cursor:grabbing}

#canvas{
  position:absolute;
  transform-origin:0 0;
}

svg{
  position:absolute;
  left:0;top:0;
  overflow:visible;
}

/* NODE */
.node{
  position:absolute;
  width:150px;
  height:65px;
  padding:6px;
  border-radius:8px;
  border:2px solid;
  text-align:center;
  font-size:13px;
  font-weight:600;
  cursor:pointer;
  transition:.25s;
  box-shadow:0 2px 6px rgba(0,0,0,.15);
}
.node:hover{
  transform:scale(1.12);
  z-index:50;
  background:#f59e0b!important;
  border-color:#f59e0b!important;
  color:white!important;
}
.node.prophet{
  box-shadow:0 0 22px rgba(16,185,129,.7);
}

/* DRAWER */
#drawer{
  position:absolute;
  top:0;right:0;bottom:0;
  width:360px;
  background:white;
  border-left:1px solid #e5e7eb;
  box-shadow:-8px 0 24px rgba(0,0,0,.2);
  display:none;
  flex-direction:column;
  z-index:30;
}
#drawer header{
  background:#047857;
  color:white;
  padding:12px;
}
#drawer .content{
  padding:16px;
  overflow:auto;
}
.badge{
  display:inline-block;
  background:#f1f5f9;
  border:1px solid #e2e8f0;
  border-radius:999px;
  padding:4px 10px;
  font-size:12px;
  margin:4px;
}
</style>
</head>

<body>

<header>
  <h1>আরব জাতিগোষ্ঠী পরিচিতি</h1>
  <p>PDF সোর্স ভিত্তিক পূর্ণ বংশলতিকা</p>
</header>

  <div style="
  position:absolute;
  top:64px;
  left:16px;
  z-index:30;
  background:white;
  padding:8px;
  border-radius:8px;
  box-shadow:0 4px 12px rgba(0,0,0,.15)
">
  <input
    id="searchBox"
    placeholder="নাম অনুসন্ধান করুন…"
    style="width:220px;padding:6px 10px;font-size:14px"
  />
</div>
  
<div id="container">
  <div id="canvas"></div>
</div>

<div id="drawer">
  <header>
    <button onclick="closeDrawer()" style="float:right;background:none;border:none;color:white;font-size:18px">✕</button>
    <h3 id="dTitle"></h3>
  </header>
  <div class="content">
    <p id="dInfo"></p>
    <div id="dChildren"></div>
  </div>
</div>

<script>
/* ================= FULL ORIGINAL DATA (UNCHANGED) ================= */
const rawData = {
  id: "root",
  name: "আরব জাতিগোষ্ঠী",
  type: "root",
  details: {
    info: "ঐতিহাসিক সূত্র মতে, বংশ পরিক্রমা অনুসারে সমগ্র আরব জাতি প্রধানত তিন ভাগে বিভক্ত। আরবের ভৌগোলিক অবস্থান সাগর ও পাহাড় বেষ্টিত এক প্রাকৃতিক দুর্গ।",
    location: "আরব উপদ্বীপ (১০-১৩ লক্ষ বর্গমাইল)"
  },
  children: [
    {
      id: "bayidah",
      name: "আরবে বায়িদাহ",
      type: "bayidah",
      details: {
        info: "এরা হলো প্রাচীন আরব জাতি। ধরাপৃষ্ঠ হতে এদের অস্তিত্ব প্রায় নিঃশেষ হয়ে গিয়েছে। ইতিহাসের পাতায় এদের খুব বেশি তথ্য পাওয়া যায় না।"
      },
      children: [
        { name: "আদ", type: "bayidah", details: { info: "প্রাচীন ধংসপ্রাপ্ত জাতি।" } },
        { name: "ছামুদ", type: "bayidah", details: { info: "প্রাচীন ধংসপ্রাপ্ত জাতি।" } },
        { name: "আমালিকা", type: "bayidah" },
        { name: "জুরহুম (প্রাচীন)", type: "bayidah", details: { info: "প্রাচীন জুরহুম গোত্র।" } },
        { name: "হাজরা মাউত", type: "bayidah", details: { location: "দক্ষিণ আরব" } }
      ]
    },
    {
      id: "ariba",
      name: "আরবে আরিবা",
      type: "ariba",
      details: {
        info: "এরা কাহতানি আরব। মূল অবস্থান ইয়ামান (দক্ষিণ আরব)।",
        location: "ইয়ামান"
      },
      children: [
        {
          name: "কাহতান",
          type: "ariba",
          children: [
            {
              name: "ইয়ারুব",
              type: "ariba",
              children: [
                {
                  name: "ইয়াশজুব",
                  type: "ariba",
                  children: [
                    {
                      name: "সাবা",
                      type: "ariba",
                      details: { info: "প্রাচীন ইয়ামান রাজ্যের রাজধানী এঁর নামেই। রানী বিলকিস এই বংশের।" },
                      children: [
                        {
                          name: "হিময়ার",
                          type: "ariba",
                          children: [
                            { name: "যাইদুল জুরহুম", type: "ariba" },
                            { name: "কুজ'আ", type: "ariba" },
                            { name: "সাকাসিক", type: "ariba" }
                          ]
                        },
                        {
                          name: "কাহলান",
                          type: "ariba",
                          children: [
                            {
                              name: "আযদ",
                              type: "ariba",
                              children: [
                                {
                                  name: " আমর আল মুযাইকিয়া",
                                  type: "ariba",
                                  children: [
                                    {
                                      name: "সা'লাবা",
                                      type: "ariba",
                                      children: [
                                        {
                                          name: "হারিসা",
                                          type: "ariba",
                                          children: [
                                            { name: "আউস", type: "ariba" },
                                            { name: "খাযরাজ", type: "ariba" }
                                          ]
                                        }
                                      ]
                                    },
                                    {
                                      name: "হারিসা (খুযা'আ)",
                                      type: "ariba",
                                      children: [
                                        { 
                                          name: "লুহাই", 
                                          type: "ariba",
                                          children: [
                                            { 
                                              name: "আমর", 
                                              type: "ariba",
                                              details: { info: "তিনি সর্বপ্রথম মক্কায় মূর্তিপূজা চালু করেন।" }
                                            }
                                          ]
                                        }
                                      ]
                                    },
                                    { name: "ইমরান", type: "ariba", children: [{ name: "আযদে ওমানি", type: "ariba" }] },
                                    { name: "জাফনা", type: "ariba", children: [{ name: "গাসসান গোত্র", type: "ariba" }] }
                                  ]
                                }
                              ]
                            },
                            { name: "লাখম", type: "ariba" },
                            { name: "তাঈ", type: "ariba" },
                            { name: "কিনদা", type: "ariba" }
                          ]
                        }
                      ]
                    }
                  ]
                },
                {
                  name: "জুরহুম (দ্বিতীয়)",
                  type: "ariba",
                  details: { info: "মক্কায় বসবাস শুরু করেন। ইসমাঈল (আ.) এঁর থেকে আরবি শেখেন।" }
                }
              ]
            }
          ]
        }
      ]
    },
    {
      id: "mustariba",
      name: "আরবে মুস্তারিবা",
      type: "mustariba",
      details: {
        info: "এরা ইসমাঈল বিন ইব্রাহিম (আ.) এর বংশধারা। এদের আদনানি আরবও বলা হয়."
      },
      children: [
        {
          name: "ইব্রাহিম (আ.)",
          type: "prophet-ancestor",
          children: [
            {
              name: "ইসমাঈল (আ.)",
              type: "prophet-ancestor",
              children: [
                { name: "নাবিত", type: "mustariba" },
                {
                  name: "কাইদার",
                  type: "prophet-line",
                  children: [
                    {
                      id: "gap-ismail-adnan",
                      name: "৪০+ প্রজন্মের ব্যবধান",
                      type: "gap-green",
                      children: [
                        {
                          name: "আদনান",
                          type: "prophet-line",
                          children: [
                            {
                              name: "মা'আদ",
                              type: "prophet-line",
                              children: [
                                {
                                  name: "নাযার",
                                  type: "prophet-line",
                                  children: [
                                    { name: "ইয়াদ", type: "mustariba" },
                                    { name: "আনমার", type: "mustariba" },
                                    {
                                      name: "রবি'আ",
                                      type: "mustariba",
                                      children: [
                                        { 
                                          name: "আসাদ", 
                                          type: "mustariba",
                                          children: [
                                            { name: "আনযাহ", type: "mustariba" },
                                            { 
                                              name: "জালীদাহ", 
                                              type: "mustariba",
                                              children: [
                                                { name: "বনু আব্দে কায়েস", type: "mustariba" },
                                                { 
                                                  name: "বনু ওয়ায়িল", 
                                                  type: "mustariba",
                                                  children: [
                                                    { name: "বনু তাগলিব", type: "mustariba" },
                                                    { 
                                                      name: "বনু বকর", 
                                                      type: "mustariba",
                                                      children: [{ name: "বনু হানিফা", type: "mustariba" }]
                                                    }
                                                  ]
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    },
                                    {
                                      name: "মুদার",
                                      type: "prophet-line",
                                      children: [
                                        { name: "কাইস আইলান", type: "mustariba" },
                                        {
                                          name: "ইলিয়াস",
                                          type: "prophet-line",
                                          children: [
                                            {
                                              name: "মুদরিকা",
                                              type: "prophet-line",
                                              children: [
                                                {
                                                  name: "খুযাইমা",
                                                  type: "prophet-line",
                                                  children: [
                                                    {
                                                      name: "আসাদ",
                                                      type: "prophet-line",
                                                      children: [
                                                        {
                                                          name: "কিনানাহ (কুরাইশ)",
                                                          type: "prophet-line",
                                                          children: [
                                                            {
                                                              name: "আন-নাদর",
                                                              type: "prophet-line",
                                                              children: [
                                                                {
                                                                  name: "মালিক",
                                                                  type: "prophet-line",
                                                                  children: [
                                                                    {
                                                                      name: "ফিহর (কুরাইশ)",
                                                                      type: "prophet-line",
                                                                      children: [
                                                                        {
                                                                          name: "গালিব",
                                                                          type: "prophet-line",
                                                                          children: [
                                                                            {
                                                                              name: "লুওয়াই",
                                                                              type: "prophet-line",
                                                                              children: [
                                                                                {
                                                                                  name: "কা'আব",
                                                                                  type: "prophet-line",
                                                                                  children: [
                                                                                    {
                                                                                      name: "মুররা",
                                                                                      type: "prophet-line",
                                                                                      children: [
                                                                                        {
                                                                                          name: "ইয়াকাজ",
                                                                                          type: "mustariba",
                                                                                          children: [{ name: "বনু মাখজুম", type: "mustariba", children: [{ name: "আবু জাহল", type: "mustariba" }] }]
                                                                                        },
                                                                                        {
                                                                                          name: "কিলাব",
                                                                                          type: "prophet-line",
                                                                                          children: [
                                                                                            {
                                                                                              name: "যুহরা",
                                                                                              type: "mustariba",
                                                                                              details: { info: "বনী যুহরা গোত্রের প্রতিষ্ঠাতা। নবীজির মাতৃকুল।" },
                                                                                              children: [
                                                                                                {
                                                                                                  name: "আব্দে মানাফ",
                                                                                                  type: "mustariba",
                                                                                                  children: [
                                                                                                    {
                                                                                                      name: "ওয়াহহাব",
                                                                                                      type: "mustariba",
                                                                                                      children: [{ name: "আমেনা", type: "mustariba", details: { info: "নবীজি (সা.)-এর রত্নগর্ভা মাতা।" } }]
                                                                                                    }
                                                                                                  ]
                                                                                                }
                                                                                              ]
                                                                                            },
                                                                                            {
                                                                                              name: "কুসাই",
                                                                                              type: "prophet-line",
                                                                                              children: [
                                                                                                { name: "আব্দুদ দার", type: "mustariba" },
                                                                                                { name: "আব্দ", type: "mustariba" },
                                                                                                { 
                                                                                                  name: "আব্দুল উজ্জা", 
                                                                                                  type: "mustariba", 
                                                                                                  children: [
                                                                                                    { 
                                                                                                      name: "আসাদ", 
                                                                                                      type: "mustariba", 
                                                                                                      children: [
                                                                                                        { 
                                                                                                          name: "খুওয়াইলিদ", 
                                                                                                          type: "mustariba", 
                                                                                                          children: [{name: "খাদিজা (রাঃ)", type: "mustariba"}] 
                                                                                                        },
                                                                                                        { name: "নওফেল", type: "mustariba" }
                                                                                                      ] 
                                                                                                    }
                                                                                                  ] 
                                                                                                },
                                                                                                { 
                                                                                                  name: "আব্দে মানাফ", 
                                                                                                  type: "prophet-line", 
                                                                                                  children: [
                                                                                                    { name: "নওফেল", type: "mustariba" },
                                                                                                    { name: "মুত্তালিব", type: "mustariba" },
                                                                                                    { 
                                                                                                      name: "আব্দে শামস", 
                                                                                                      type: "mustariba",
                                                                                                      children: [
                                                                                                        { 
                                                                                                          name: "উমাইয়া", 
                                                                                                          type: "mustariba", 
                                                                                                          children: [
                                                                                                            { 
                                                                                                              name: "আবুল আস", 
                                                                                                              type: "mustariba", 
                                                                                                              children: [{ name: "আফফান" }, { name: "হাকাম" }] 
                                                                                                            },
                                                                                                            { 
                                                                                                              name: "হারব", 
                                                                                                              type: "mustariba", 
                                                                                                              children: [{ name: "আবু সুফিয়ান" }] 
                                                                                                            }
                                                                                                          ] 
                                                                                                        }
                                                                                                      ] 
                                                                                                    },
                                                                                                    { 
                                                                                                      name: "হাশিম", 
                                                                                                      type: "prophet-line", 
                                                                                                      children: [
                                                                                                        { name: "আব্দুল মুত্তালিব", type: "prophet-line", children: [
                                                                                                          { name: "আব্দুল্লাহ", type: "prophet-line", children: [
                                                                                                            { name: "মুহাম্মাদ ﷺ", type: "prophet", details: { info: "আল্লাহর রাসূল এবং সর্বশেষ নবী।" } }
                                                                                                          ] }
                                                                                                        ] }
                                                                                                      ] 
                                                                                                    }
                                                                                                  ] 
                                                                                                }
                                                                                              ] 
                                                                                            }
                                                                                          ]
                                                                                        }
                                                                                      ]
                                                                                    }
                                                                                  ]
                                                                                }
                                                                              ]
                                                                            }
                                                                          ]
                                                                        }
                                                                      ]
                                                                    }
                                                                  ]
                                                                }
                                                              ]
                                                            }
                                                          ]
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        }
      ]
    }
  ]
};
const NODE_W=150,NODE_H=65,V_GAP=100,H_GAP=40;

/* ================= LAYOUT ENGINE ================= */
function layout(node,depth=0){
  node.children=node.children||[];
  const kids=node.children.map(c=>layout(c,depth+1));
  let totalW=NODE_W;
  if(kids.length){
    totalW=kids.reduce((a,c)=>a+c.totalW+H_GAP,0)-H_GAP;
  }
  return {...node,depth,totalW,children:kids};
}
function position(node,x){
  let cx=x;
  node.children.forEach(c=>{
    position(c,cx);
    cx+=c.totalW+H_GAP;
  });
  node.x=x+node.totalW/2-NODE_W/2;
  node.y=node.depth*(NODE_H+V_GAP);
}

/* ================= PROCESS ================= */
const tree=layout(rawData);
position(tree,0);

/* ================= FLATTEN ================= */
const nodes=[],edges=[];
(function walk(n){
  nodes.push(n);
  n.children.forEach(c=>{
    edges.push({a:n,b:c});
    walk(c);
  });
})(tree);

/* ================= BOUNDS ================= */
const minX=Math.min(...nodes.map(n=>n.x))-300;
const minY=Math.min(...nodes.map(n=>n.y))-300;
const maxX=Math.max(...nodes.map(n=>n.x+NODE_W))+300;
const maxY=Math.max(...nodes.map(n=>n.y+NODE_H))+300;

/* ================= CANVAS ================= */
const canvas=document.getElementById("canvas");
canvas.style.width=(maxX-minX)+"px";
canvas.style.height=(maxY-minY)+"px";

/* ================= SVG ================= */
const svg=document.createElementNS("http://www.w3.org/2000/svg","svg");
svg.setAttribute("width",maxX-minX);
svg.setAttribute("height",maxY-minY);
canvas.appendChild(svg);

/* ================= EDGES ================= */
edges.forEach(e=>{
  const p=document.createElementNS(svg.namespaceURI,"path");
  const x1=e.a.x-minX+NODE_W/2,y1=e.a.y-minY+NODE_H;
  const x2=e.b.x-minX+NODE_W/2,y2=e.b.y-minY;
  p.setAttribute("d",`M${x1},${y1} C${x1},${y1+60} ${x2},${y2-60} ${x2},${y2}`);
  p.setAttribute("stroke","#94a3b8");
  p.setAttribute("fill","none");
  p.setAttribute("stroke-width","2");
  svg.appendChild(p);
});

/* ================= NODES ================= */
nodes.forEach(n=>{
  const d=document.createElement("div");
  d.className="node";
  if(n.type==="prophet") d.classList.add("prophet");
  d.style.left=(n.x-minX)+"px";
  d.style.top=(n.y-minY)+"px";
  d.style.background=color(n.type);
  d.style.borderColor=color(n.type);
  d.textContent=n.name;
  d.onclick=e=>{
    e.stopPropagation();
    openDrawer(n);
  };
  canvas.appendChild(d);
});

/* ================= PAN + ZOOM ================= */
let scale=.6,ox=300,oy=160,drag=false,sx,sy;
function update(){canvas.style.transform=`translate(${ox}px,${oy}px) scale(${scale})`}
update();

container.onmousedown=e=>{drag=true;container.classList.add("dragging");sx=e.clientX-ox;sy=e.clientY-oy};
container.onmousemove=e=>{if(drag){ox=e.clientX-sx;oy=e.clientY-sy;update()}};
container.onmouseup=()=>{drag=false;container.classList.remove("dragging")};
container.onmouseleave=()=>drag=false;
container.onwheel=e=>{
  e.preventDefault();
  scale=Math.max(.05,Math.min(3,scale-e.deltaY*0.001));
  update();
};

/* ================= DRAWER ================= */
function openDrawer(n){
  drawer.style.display="flex";
  dTitle.textContent=n.name;
  dInfo.textContent=n.details?.info||"এই নোডের জন্য অতিরিক্ত তথ্য নেই।";
  dChildren.innerHTML="";
  (n.children||[]).forEach(c=>{
    const b=document.createElement("span");
    b.className="badge";
    b.textContent=c.name;
    dChildren.appendChild(b);
  });
}
function closeDrawer(){drawer.style.display="none"}

/* ================= COLOR ================= */
function color(t){
  return {
    root:"#064E3B",
    bayidah:"#9333EA",
    ariba:"#407cde",
    mustariba:"#EA580C",
    prophet:"#047857",
    "prophet-line":"#10b981",
    "prophet-ancestor":"#10b981",
    "gap-green":"#a7f3d0"
  }[t]||"#64748b";
}
</script>

</body>
</html>

